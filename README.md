# Демо-приложение "Голос в маршрут"

Это  демо-приложение , созданное для хакатона.

Оно состоит из статичной фронтенд-страницы, которая записывает фразу, отправляет ее на бэкенд (FastAPI). Бэкенд использует API 2ГИС для геокодинга (преобразования названий в координаты) и построения маршрута, а затем возвращает список координат на фронтенд для отображения на карте.

## Технологический стек

- **Фронтенд**: React (с Vite), 2GIS MapGL
- **Бэкенд**: FastAPI (Python)
- **API**: 2GIS Routing API, 2GIS Places API

## Как запустить

Вам нужно запустить бэкенд и фронтенд серверы в двух разных терминалах.

### 1. Запуск бэкенд-сервера

Бэкенд написан на Python с использованием Poetry для управления зависимостями.

```bash
# 1. Перейдите в директорию бэкенда
cd backend

# 2. Установите зависимости с помощью Poetry
# (Если у вас нет Poetry, сначала установите его: https://python-poetry.org/docs/#installation)
poetry install

# 3. Запустите сервер для разработки
poetry run uvicorn main:app --reload --port 8000
```
API бэкенда будет доступно по адресу `http://localhost:8000`.

### 2. Запуск фронтенд-сервера

Фронтенд — это React-приложение, использующее Vite.

```bash
# 1. Перейдите в директорию фронтенда
cd frontend

# 2. Установите зависимости с помощью npm
npm install

# 3. Запустите сервер для разработки
npm start
```

Vite автоматически откроет ваш браузер и перейдет по нужному адресу (обычно `http://localhost:5173`).

---

После того как оба сервера будут запущены, вы сможете использовать веб-интерфейс, чтобы записать голос, отправить его на бэкенд и увидеть построенный маршрут на карте.

### 3. Запуск crewAI агента (опционально, для отладки)

Вы можете запустить `crewAI` агента напрямую, чтобы протестировать его логику отдельно от FastAPI бэкенда.

#### Настройка API-ключей

Агенту и бэкенду для работы требуются API-ключи. Создайте файл `.env` в корневой директории `route_planner_agent` и добавьте в него следующие переменные:

```
# Ключ для YandexGPT API
YANDEX_API_KEY="ваш_api_ключ"
YANDEX_FOLDER_ID="ваш_folder_id"

# Ключ для 2GIS API (используется бэкендом)
2GIS_API_KEY="ваш_ключ_2gis"
```

**Примечание:** В текущей конфигурации агент настроен на работу с YandexGPT. Для использования других моделей (например, Mistral или OpenAI) потребуется изменить код в файле `route_planner_agent/src/route_planner_agent/crew.py`.

#### Запуск агента

```bash
# 1. Перейдите в директорию агента
cd route_planner_agent

# 2. Установите зависимости с помощью crewai
crewai install

# 3. Запустите "команду"
crewai run
```
